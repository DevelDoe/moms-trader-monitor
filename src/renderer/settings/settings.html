<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Settings</title>
        <link rel="stylesheet" href="../styles.css" />
        <link rel="stylesheet" href="./settings.css" />
    </head>
    <body>
        <button class="close-btn" onclick="window.settingsAPI.toggle()" aria-label="Close"></button>

        <div class="settings-container">
            <h1 class="draggable" style="width: 90%">Settings</h1>

            <div class="tab">
                <button class="tablinks" onclick="openTab(event, 'admin')">Admin</button>
                <button class="tablinks active" onclick="openTab(event, 'general')">General</button>
                <button class="tablinks" onclick="openTab(event, 'scanner')">Alerts</button>
                <button class="tablinks" onclick="openTab(event, 'top')">Top</button>
                <button class="tablinks" onclick="openTab(event, 'news')">News</button>
            </div>

            <div id="admin" class="tabcontent">
                <button id="fetchNewsBtn">Fetch News</button><br /><br />
                <button id="nukeBtn">üí£ Nuke State</button>
            </div>

            <div id="general" class="tabcontent active">
                <section id="section-windows border-section">
                    <h2>Windows</h2>

                    <div class="toggle-row">
                        <label class="switch">
                            <input type="checkbox" id="show-events" />
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label">Chronicle Feed</span>
                    </div>

                    <div class="toggle-row">
                        <label class="switch">
                            <input type="checkbox" id="show-frontline" />
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label">Frontline</span>
                    </div>

                    <div class="toggle-row">
                        <label class="switch">
                            <input type="checkbox" id="show-heroes" />
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label">Heroes</span>
                    </div>

                    <div class="toggle-row">
                        <label class="switch">
                            <input type="checkbox" id="show-active" />
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label">Grimoire</span>
                    </div>

                    <div class="toggle-row">
                        <label class="switch">
                            <input type="checkbox" id="show-scrollXp" />
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label">Hall of Legends XP</span>
                    </div>

                    <div class="toggle-row">
                        <label class="switch">
                            <input type="checkbox" id="show-scrollChange" />
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label">Hall of Legends Change</span>
                    </div>

                    <div class="toggle-row">
                        <label class="switch">
                            <input type="checkbox" id="show-scrollStats" />
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label">Sigil of Merit</span>
                    </div>

                    <div class="toggle-row">
                        <label class="switch">
                            <input type="checkbox" id="show-scrollHod" />
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label">Ledger of Summits</span>
                    </div>

                    <div class="toggle-row">
                        <label class="switch">
                            <input type="checkbox" id="show-infobar" />
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label">Notice Board</span>
                    </div>

                    <div class="toggle-row">
                        <label class="switch">
                            <input type="checkbox" id="show-progress" />
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label">Market Tide</span>
                    </div>

                    <div class="toggle-row">
                        <label class="switch">
                            <input type="checkbox" id="show-wizard" />
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label">Arcane Wizard</span>
                    </div>

                    <div class="toggle-row">
                        <label class="switch">
                            <input type="checkbox" id="show-news" />
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label">The Bard</span>
                    </div>

                    <div class="toggle-row">
                        <label class="switch">
                            <input type="checkbox" id="show-sessionHistory" />
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label">Register of Conquerors</span>
                    </div>

                    <div class="toggle-row">
                        <label class="switch">
                            <input type="checkbox" id="show-halts" />
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label">Trading Halts Monitor</span>
                    </div>

                    <div class="window-controls" style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #444;">
                        <h3>Window Management</h3>
                        <button id="reset-all-windows-btn" class="danger-btn" style="background-color: #d32f2f; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">
                            üîÑ Reset All Windows to Default Positions
                        </button>
                        <p style="font-size: 12px; color: #888; margin-top: 8px;">
                            Use this if windows are off-screen or on non-existent monitors
                        </p>
                    </div>
                </section>

                <section id="section-traderview">
                    <h2>Trader's View</h2>
                    
                    <!-- Experimental Notice -->
                    <div style="background: rgba(255, 193, 7, 0.1); border: 1px solid rgba(255, 193, 7, 0.3); border-radius: 4px; padding: 12px; margin-bottom: 15px;">
                        <p style="color: #ffc107; font-size: 12px; margin: 0; line-height: 1.4;">
                            ‚ö†Ô∏è <strong>EXPERIMENTAL FEATURE</strong><br>
                            This is a proof-of-concept showcase of TradingView integration possibilities. 
                            This is <em>not</em> a proper TradingView integration and may have limitations or quirks.
                        </p>
                    </div>

                    <!-- Master Auto Mode Toggle -->
                    <div class="toggle-row">
                        <label class="switch">
                            <input type="checkbox" id="enableAutoMode" />
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label">Enable Auto TradingView Mode</span>
                    </div>

                    <!-- Mode Selection (only visible when auto mode is enabled) -->
                    <div id="traderview-mode-section" class="subsection" style="display: none; margin-left: 20px; margin-top: 15px; padding: 15px; border-left: 3px solid #555; background: rgba(255,255,255,0.02);">
                        <h3 style="font-size: 14px; color: #ccc; margin-bottom: 15px;">Select Mode:</h3>
                        
                        <!-- Radio button mode selection -->
                        <div style="margin-bottom: 15px;">
                            <div style="margin-bottom: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="radio" name="traderviewMode" id="activeMode" value="active" style="margin-right: 10px;" />
                                    <span class="toggle-label">Active Mode - Auto chart for active symbol</span>
                                </label>
                            </div>
                            <div style="margin-bottom: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="radio" name="traderviewMode" id="heroesMode" value="heroes" style="margin-right: 10px;" />
                                    <span class="toggle-label">Heroes Mode - Auto charts for top heroes</span>
                                </label>
                            </div>
                           
                        </div>

                        <!-- Auto Close Toggle -->
                        <div class="toggle-row" style="margin-top: 20px; border-top: 1px solid #333; padding-top: 15px;">
                            <label class="switch">
                                <input type="checkbox" id="enableAutoClose" />
                                <span class="slider round"></span>
                            </label>
                            <span class="toggle-label">Auto-close windows when symbols change</span>
                        </div>

                    </div>
                </section>

                <section id="section-hall-of-legends">
                    <h2>Hall of Legends</h2>

                    <label for="xp-list-length">
                        Max List Length:
                        <input type="number" id="xp-list-length" min="1"  step="1" />

                    </label>

                    <div class="toggle-row">
                        <label class="switch">
                            <input type="checkbox" id="xp-show-headers" />
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label">Show Column Headers</span>
                    </div>

                    <div class="button-row">
                        <button type="button" id="xp-show-up-xp" class="column-btn active" data-column="up-xp">Up XP</button>
                        <button type="button" id="xp-show-down-xp" class="column-btn active" data-column="down-xp">Down XP</button>
                        <button type="button" id="xp-show-ratio" class="column-btn active" data-column="ratio">Net Ratio</button>
                        <button type="button" id="xp-show-total" class="column-btn active" data-column="total">Total XP</button>
                        <button type="button" id="xp-show-net" class="column-btn active" data-column="net">Net XP</button>
                        <button type="button" id="xp-show-price" class="column-btn active" data-column="price">Price</button>
                        <button type="button" id="xp-show-total-volume" class="column-btn active" data-column="total-volume">Volume</button>
                        <button type="button" id="xp-show-level" class="column-btn active" data-column="level">Level</button>
                        <button type="button" id="xp-show-session-change" class="column-btn active" data-column="session-change">Change</button>
                    </div>
                </section>

                <section id="section-hall-of-legends-change">
                    <h2>Hall of Legends Change</h2>

                    <label for="change-list-length">
                        Max List Length:
                        <input type="number" id="change-list-length" min="1"  step="1" />

                    </label>

                    <div class="toggle-row">
                        <label class="switch">
                            <input type="checkbox" id="change-show-headers" />
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label">Show Column Headers</span>
                    </div>

                    <div class="button-row">
                        <button type="button" id="change-show-up-xp" class="column-btn active" data-column="up-xp">Up XP</button>
                        <button type="button" id="change-show-down-xp" class="column-btn active" data-column="down-xp">Down XP</button>
                        <button type="button" id="change-show-ratio" class="column-btn active" data-column="ratio">Net Ratio</button>
                        <button type="button" id="change-show-total" class="column-btn active" data-column="total">Total XP</button>
                        <button type="button" id="change-show-net" class="column-btn active" data-column="net">Net XP</button>
                        <button type="button" id="change-show-price" class="column-btn active" data-column="price">Price</button>
                        <button type="button" id="change-show-total-volume" class="column-btn active" data-column="total-volume">Volume</button>
                        <button type="button" id="change-show-level" class="column-btn active" data-column="level">Level</button>
                        <button type="button" id="change-show-session-change" class="column-btn active" data-column="session-change">Change</button>
                    </div>
                </section>

                <section id="section-ledger-of-summits">
                    <h2>Ledger of Summits</h2>

                    <label for="hod-list-length">
                        Max List Length:
                        <input type="number" id="hod-list-length" min="1"  step="1" />

                    </label>
                </section>

                <section id="section-sigil-of-merit">
                    <h2>Sigil of Merit</h2>

                    <label for="stats-list-length">
                        Max List Length:
                        <input type="number" id="stats-list-length" min="1"  step="1" />

                    </label>
                </section>


                <section id="section-audio">
                    <h2>Audio</h2>

                    <div class="toggle-row">
                        <label class="switch">
                            <input type="checkbox" id="audio-mute-toggle" />
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label">Mute All Audio Alerts</span>
                    </div>

                    <label for="events-combo-volume">
                        Events combo volume:
                        <input type="range" id="events-combo-volume" min="0" max="1" step="0.05" />
                        <span id="events-combo-volume-value">50%</span>
                        <button id="test-combo-btn" style="margin-left: 10px;" title="Test Events combo sound">Test Combo</button>
                    </label>

                    
                    <label for="news-alert-volume">
                        News alert volume:
                        <input type="range" id="news-alert-volume" min="0" max="1" step="0.05" />
                        <span id="news-alert-volume-value">50%</span>
                        <button id="test-news-btn" style="margin-left: 10px;" title="Test News alert sound">Test News</button>
                    </label>

                    <label for="hod-chime-volume">
                        High of day chime volume:
                        <input type="range" id="hod-chime-volume" min="0" max="1" step="0.05" />
                        <span id="hod-chime-volume-value">50%</span>
                        <button id="test-chime-btn" style="margin-left: 10px;" title="Test HOD chime sound">Test Chime</button>
                    </label>

                </section>
            </div>

            <div id="scanner" class="tabcontent">
                <section id="min-max-filters" class="filter-section">
                    <div class="filter-container">
                        <label title="Enter 0 to disable limit"
                            >Min Price:
                            <input type="number" id="alerts-min-price" step="0.01" placeholder="No limit" />
                        </label>
                        <label title="Enter 0 to disable limit"
                            >Max Price:
                            <input type="number" id="alerts-max-price" step="0.01" placeholder="No limit" />
                        </label>

                        <label for="filter-direction"
                            >Direction:
                            <select id="filter-direction" class="form-select">
                                <option value="">Any</option>
                                <option value="UP">Up</option>
                                <option value="DOWN">Down</option>
                            </select>
                        </label>

                        <label for="filter-change-percent"
                            >Min % Change:
                            <input type="number" id="filter-change-percent" step="0.1" placeholder="0 = Any" />
                        </label>

                        <label for="filter-volume"
                            >Min Volume:
                            <input type="number" id="filter-volume" step="1" placeholder="0 = Any" />
                        </label>

                        <label for="max-alerts"
                            >Max Alerts:
                            <input type="number" id="max-alerts" step="1" placeholder="100" />
                        </label>
                    </div>
                </section>
            </div>

            <div id="top" class="tabcontent">
                <!-- <div>
                    <label>
                        <input type="checkbox" id="top-transparent-toggle" />
                        Enable Transparent Background
                    </label>
                </div> -->

                <section id="min-max-filters">
                    <label title="Enter 0 to disable limit"> Min Price: <input type="number" id="min-price" step="0.05" /> </label>
                    <label title="Enter 0 to disable limit"> Max Price: <input type="number" id="max-price" step="1" /> </label>
                    <label title="Enter 0 to disable limit"> Min Volume: <input type="number" id="min-volume" step="10000" /> </label>
                    <label title="Enter 0 to disable limit"> Max Volume: <input type="number" id="max-volume" step="10000" /> </label>
                    <label title="Enter 0 to disable limit"> Min Float: <input type="number" id="min-float" step="100000" /> </label>
                    <label title="Enter 0 to disable limit"> Max Float: <input type="number" id="max-float" step="100000" /> </label>
                    <label title="Enter 0 to disable limit"> Min Score: <input type="number" id="min-score" step="1" /> </label>
                    <label title="Enter 0 to disable limit"> Max Score: <input type="number" id="max-score" step="1" /> </label>
                </section>


            </div>

            <div id="news" class="tabcontent">
                <h2>NEWS</h2>

                <div class="filter-section">
                    <label>Max News Entries: <input type="number" id="news-list-length" min="1" max="200" step="1" value="20" /></label>
                </div>

                <!-- ‚úÖ Keyword Management Section -->
                <h3>Keyword Filters</h3>

                <div class="keyword-input-section">
                    <select id="keyword-type">
                        <option value="blockList">Block List</option>
                        <option value="bullishList">Bullish List</option>
                        <option value="bearishList">Bearish List</option>
                    </select>

                    <input type="text" id="keyword-input" placeholder="Enter keyword..." />
                    <button id="add-keyword" class="add-keyword-btn">Add</button>
                </div>

                <!-- ‚úÖ Individual List Sections -->
                <div class="keyword-lists-container">
                    <!-- Block List Section -->
                    <div class="keyword-list-section">
                        <div class="list-header">
                            <h4>Block List</h4>
                            <div class="list-search">
                                <input type="text" id="block-search" placeholder="Search block list..." class="list-search-input" />
                            </div>
                        </div>
                        <div class="list-content">
                            <ul id="block-list"></ul>
                        </div>
                    </div>

                    <!-- Bullish List Section -->
                    <div class="keyword-list-section">
                        <div class="list-header">
                            <h4>Bullish List</h4>
                            <div class="list-search">
                                <input type="text" id="bullish-search" placeholder="Search bullish list..." class="list-search-input" />
                            </div>
                        </div>
                        <div class="list-content">
                            <ul id="bullish-list"></ul>
                        </div>
                    </div>

                    <!-- Bearish List Section -->
                    <div class="keyword-list-section">
                        <div class="list-header">
                            <h4>Bearish List</h4>
                            <div class="list-search">
                                <input type="text" id="bearish-search" placeholder="Search bearish list..." class="list-search-input" />
                            </div>
                        </div>
                        <div class="list-content">
                            <ul id="bearish-list"></ul>
                        </div>
                    </div>
                </div>

                <!-- ‚úÖ Filing Filters Section -->
                <h3>Filing Filters</h3>
                
                <div class="filing-filters-container">
                    <!-- High Priority Filings (Priority 1) -->
                    <div class="filing-group-section">
                        <div class="filing-group-header">
                            <h4>High Priority Filings (Priority 1)</h4>
                            <div class="toggle-row">
                                <label class="switch">
                                    <input type="checkbox" id="filing-group-1-enabled" checked />
                                    <span class="slider round"></span>
                                </label>
                                <span class="toggle-label">Show High Priority</span>
                            </div>
                        </div>
                        <div class="filing-forms-list" id="filing-forms-1">
                            <!-- Forms will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Medium Priority Filings (Priority 2) -->
                    <div class="filing-group-section">
                        <div class="filing-group-header">
                            <h4>Medium Priority Filings (Priority 2)</h4>
                            <div class="toggle-row">
                                <label class="switch">
                                    <input type="checkbox" id="filing-group-2-enabled" checked />
                                    <span class="slider round"></span>
                                </label>
                                <span class="toggle-label">Show Medium Priority</span>
                            </div>
                        </div>
                        <div class="filing-forms-list" id="filing-forms-2">
                            <!-- Forms will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Low Priority Filings (Priority 3) -->
                    <div class="filing-group-section">
                        <div class="filing-group-header">
                            <h4>Low Priority Filings (Priority 3)</h4>
                            <div class="toggle-row">
                                <label class="switch">
                                    <input type="checkbox" id="filing-group-3-enabled" />
                                    <span class="slider round"></span>
                                </label>
                                <span class="toggle-label">Show Low Priority</span>
                            </div>
                        </div>
                        <div class="filing-forms-list" id="filing-forms-3">
                            <!-- Forms will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="./settings.js"></script>
    </body>
</html>
